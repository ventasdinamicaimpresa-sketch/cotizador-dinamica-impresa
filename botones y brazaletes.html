<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotizador Bontones y Brazaletes</title>

    <!-- Bootstrap 5.3.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts: Orbitron -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary-color: #00aaff;
            --secondary-color: #ff00ff;
            --background-color: #1a1a2e;
            --card-background: #162447;
            --text-color: #ffffff;
            /* Main text is white */
            --header-color: #ffffff;
            --success-color: #00ff7f;
            /* Neon green */
            --danger-color: #ff4d4d;
            /* Neon red */
            --warning-color: #ffd700;
            /* Neon yellow */
        }

        /* Universal box-sizing and base font settings */
        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        body {
            background-color: var(--background-color);
            color: var(--text-color);
            font-family: 'Orbitron', sans-serif;
        }

        /* --- General Text Overrides --- */
        /* This is the key change: Force color on all common text elements */
        p,
        span,
        strong,
        label,
        legend,
        h4,
        h5,
        h6,
        .form-label,
        .form-check-label,
        .list-group-item,
        .card-body {
            color: var(--text-color) !important;
        }

        .container {
            max-width: 900px;
            margin-top: 40px;
            padding-bottom: 40px;
        }

        h1,
        h2 {
            color: var(--header-color);
            text-shadow: 0 0 10px var(--primary-color);
            text-align: center;
            margin-bottom: 20px;
        }

        /* Keep the special color for the total */
        #total_botones,
        #total_brazaletes {
            color: var(--success-color) !important;
            text-shadow: 0 0 8px var(--success-color);
        }

        /* Keep the special color for the muted text */
        .text-muted {
            color: #aaa !important;
        }

        .card {
            background-color: var(--card-background);
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 0 20px rgba(0, 170, 255, 0.3);
            transition: all 0.3s ease-in-out;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 170, 255, 0.5);
        }

        .card-header {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: var(--header-color) !important;
            /* Ensure header text is white */
            border-bottom: none;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            padding: 15px;
            font-size: 1.2rem;
            text-align: center;
        }

        .card-header i {
            margin-right: 10px;
        }

        .form-control,
        .form-check-input {
            background-color: #2c3e50;
            color: var(--text-color);
            border: 1px solid var(--primary-color);
        }

        .form-control:focus {
            background-color: #34495e;
            color: var(--text-color);
            border-color: var(--secondary-color);
            box-shadow: 0 0 10px var(--secondary-color);
        }

        .form-check-input:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .badge.bg-info {
            background-color: var(--primary-color) !important;
            font-size: 1.1rem;
        }

        .list-group-item {
            background-color: transparent;
            border-color: rgba(0, 170, 255, 0.2);
        }

        .costs-summary-card .card-header {
            background: linear-gradient(45deg, var(--warning-color), #ff8c00);
        }

        .costs-summary-card {
            border-color: var(--warning-color);
        }

        .summary-card .card-header {
            background: linear-gradient(45deg, var(--success-color), #28a745);
        }

        .summary-card {
            border-color: var(--success-color);
        }

        .btn {
            border-radius: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-primary:hover {
            background-color: transparent;
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .btn-danger {
            background-color: var(--danger-color);
            border-color: var(--danger-color);
        }

        .btn-danger:hover {
            background-color: transparent;
            color: var(--danger-color);
            border-color: var(--danger-color);
        }

        hr {
            border-color: rgba(0, 170, 255, 0.3);
        }
    </style>
</head>

<body>

    <div class="container">
        <h1><i class="fas fa-cogs"></i> Cotizador Bontones y Brazaletes</h1>
        <p class="text-center text-muted small">Creado por: Adrian Mtz 8341446103</p>

        <!-- =========== SECCIÓN COTIZADOR DE BOTONES =========== -->
        <div class="card">
            <div class="card-header">
                <h2><i class="fas fa-dot-circle"></i> BOTONES TIPO PIN 5.5 CM</h2>
            </div>
            <div class="card-body p-4">
                <div class="row align-items-end">
                    <div class="col-md-6">
                        <label for="cantidad_botones" class="form-label fw-bold"><i class="fas fa-sort-numeric-up"></i>
                            Cantidad a cotizar:</label>
                        <input type="number" class="form-control" id="cantidad_botones" min="1"
                            placeholder="Escribe la cantidad...">
                    </div>
                    <div class="col-md-6 mt-3 mt-md-0 text-end">
                        <h4>Precio Unitario: <span id="precioUnitarioVenta_botones" class="badge bg-info">$0.00</span>
                        </h4>
                    </div>
                </div>

                <hr>

                <fieldset class="form-group">
                    <legend class="col-form-label col-sm-4 pt-0 fw-bold"><i class="fas fa-palette"></i> Costo de Diseño:
                    </legend>
                    <div id="opcionesDiseno_botones">
                        <div class="form-check"><input class="form-check-input" type="radio" name="costoDiseno_botones"
                                value="50" data-label="Cliente envía diseño"><label class="form-check-label">Cliente
                                envía diseño ($50.00)</label></div>
                        <div class="form-check"><input class="form-check-input" type="radio" name="costoDiseno_botones"
                                value="215.52" data-label="Realizar diseño"><label class="form-check-label">Realizar
                                diseño ($215.52)</label></div>
                        <div class="form-check"><input class="form-check-input" type="radio" name="costoDiseno_botones"
                                value="150" data-label="Diseño guardado"><label class="form-check-label">Diseño guardado
                                ($150.00)</label></div>
                    </div>
                </fieldset>

                <hr>

                <div class="row mt-4">
                    <div class="col-md-7">
                        <h4><i class="fas fa-calculator"></i> Resultado (Botones):</h4>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">Subtotal
                                (Botones):<span id="subtotal_botones" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo de
                                Diseño:<span id="costoDisenoTotal_botones" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">IVA
                                (16%):<span id="iva_botones" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center fs-5">
                                <strong>Total:</strong><strong id="total_botones">$0.00</strong></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo Unitario
                                (sin IVA):<span id="costoUnitarioSinIva_botones" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo Unitario
                                (Neto):<span id="costoUnitarioNeto_botones" class="fw-bold">$0.00</span></li>
                        </ul>
                    </div>
                    <div class="col-md-5 mt-4 mt-md-0">
                        <div class="card costs-summary-card">
                            <div class="card-header"><i class="fas fa-microchip"></i> Resumen de Costos (Interno)</div>
                            <div class="card-body small p-3">
                                <p><strong>Hojas a usar:</strong> <span id="cantidadHojas_botones"
                                        class="fw-bold">0</span></p>
                                <p><strong>Utilidad aplicada:</strong> <span id="utilidadAplicada_botones"
                                        class="fw-bold">N/A</span></p>
                                <p><strong>Costo Botones:</strong><br><span id="detalleCostoBase_botones"></span><span
                                        id="costoBaseTotal_botones" class="fw-bold">$0.00</span></p>
                                <p><strong>Costo Impresión:</strong><br><span
                                        id="detalleCostoImpresion_botones"></span><span id="costoImpresionTotal_botones"
                                        class="fw-bold">$0.00</span></p>
                                <p><strong>Costo Corte:</strong><br><span id="detalleCostoCorte_botones"></span><span
                                        id="costoCorteTotal_botones" class="fw-bold">$0.00</span></p>
                                <hr>
                                <p><strong>Costo Total Producción:</strong> <strong
                                        id="costoProduccionTotal_botones">$0.00</strong></p>
                                <p class="mt-2"><strong>Utilidad Bruta (Botones):</strong> <strong
                                        id="utilidadBruta_botones" class="text-success">$0.00</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-grid gap-2 mt-4"><button id="limpiar_botones" class="btn btn-danger"><i
                            class="fas fa-trash-alt"></i> Limpiar Campos de Botones</button></div>
            </div>
        </div>

        <div class="card summary-card">
            <div class="card-header"><i class="fas fa-clipboard"></i> Resumen Simplificado (Botones)</div>
            <div class="card-body p-4">
                <textarea id="resumenCliente_botones" class="form-control" rows="4" readonly></textarea>
                <div class="d-grid gap-2 mt-3"><button id="copiar_botones" class="btn btn-primary"><i
                            class="fas fa-copy"></i> Copiar Resumen de Botones</button></div>
            </div>
        </div>

        <!-- =========== SECCIÓN COTIZADOR DE BRAZALETES =========== -->
        <div class="card mt-5">
            <div class="card-header">
                <h2><i class="fas fa-ring"></i> BRAZALETE SERIGRAFÍA 1 TINTA</h2>
            </div>
            <div class="card-body p-4">
                <div class="row align-items-end">
                    <div class="col-md-6">
                        <label class="form-label fw-bold"><i class="fas fa-tags"></i> Tipo de Brazalete:</label>
                        <div id="tipo_brazalete">
                            <div class="form-check"><input class="form-check-input" type="radio" name="tipoBrazalete"
                                    value="papel" checked><label class="form-check-label">Papel 3/4"</label></div>
                            <div class="form-check"><input class="form-check-input" type="radio" name="tipoBrazalete"
                                    value="plastico"><label class="form-check-label">Plástico</label></div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <label for="cantidad_brazaletes" class="form-label fw-bold"><i
                                class="fas fa-sort-numeric-up"></i> Cantidad a cotizar:</label>
                        <input type="number" class="form-control" id="cantidad_brazaletes" min="1"
                            placeholder="Escribe la cantidad...">
                    </div>
                </div>

                <hr>

                <div class="row mt-4">
                    <div class="col-md-6">
                        <fieldset class="form-group">
                            <legend class="col-form-label pt-0 fw-bold"><i class="fas fa-palette"></i> Costo de Diseño:
                            </legend>
                            <div id="opcionesDiseno_brazaletes">
                                <div class="form-check"><input class="form-check-input" type="radio"
                                        name="costoDiseno_brazaletes" value="50"
                                        data-label="Cliente envía diseño"><label class="form-check-label">Cliente envía
                                        diseño ($50.00)</label></div>
                                <div class="form-check"><input class="form-check-input" type="radio"
                                        name="costoDiseno_brazaletes" value="215.52" data-label="Realizar diseño"><label
                                        class="form-check-label">Realizar diseño ($215.52)</label></div>
                                <div class="form-check"><input class="form-check-input" type="radio"
                                        name="costoDiseno_brazaletes" value="150" data-label="Diseño guardado"><label
                                        class="form-check-label">Diseño guardado ($150.00)</label></div>
                            </div>
                        </fieldset>
                    </div>
                    <div class="col-md-6">
                        <fieldset class="form-group">
                            <legend class="col-form-label pt-0 fw-bold"><i class="fas fa-box-open"></i> ¿En stock?
                            </legend>
                            <div id="stock_brazalete">
                                <div class="form-check"><input class="form-check-input" type="radio"
                                        name="stockBrazalete" value="si" checked><label class="form-check-label">Sí (sin
                                        costo extra)</label></div>
                                <div class="form-check"><input class="form-check-input" type="radio"
                                        name="stockBrazalete" value="no"><label class="form-check-label">No (+$300.00
                                        paquetería)</label></div>
                            </div>
                        </fieldset>
                    </div>
                </div>

                <hr>

                <div class="row mt-4">
                    <div class="col-md-7">
                        <h4><i class="fas fa-calculator"></i> Resultado (Brazaletes):</h4>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between align-items-center">Subtotal
                                (Brazaletes):<span id="subtotal_brazaletes" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo de
                                Diseño:<span id="costoDisenoTotal_brazaletes" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo de
                                Paquetería:<span id="costoPaqueteria_brazaletes" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">IVA
                                (16%):<span id="iva_brazaletes" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center fs-5">
                                <strong>Total:</strong><strong id="total_brazaletes" class="text-success">$0.00</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo Unitario
                                (sin IVA):<span id="costoUnitarioSinIva_brazaletes" class="fw-bold">$0.00</span></li>
                            <li class="list-group-item d-flex justify-content-between align-items-center">Costo Unitario
                                (con IVA):<span id="costoUnitarioNeto_brazaletes" class="fw-bold">$0.00</span></li>
                        </ul>
                    </div>
                    <div class="col-md-5 mt-4 mt-md-0">
                        <div class="card costs-summary-card">
                            <div class="card-header"><i class="fas fa-microchip"></i> Resumen de Costos (Interno)</div>
                            <div class="card-body small p-3">
                                <p><strong>Utilidad aplicada:</strong> <span id="utilidadAplicada_brazaletes"
                                        class="fw-bold">N/A</span></p>
                                <p><strong>Costo Brazaletes (+10):</strong><br><span
                                        id="detalleCostoBase_brazaletes"></span><span id="costoBaseTotal_brazaletes"
                                        class="fw-bold">$0.00</span></p>
                                <p><strong>Costo Marco:</strong> <span id="costoMarco_brazaletes"
                                        class="fw-bold">$0.00</span></p>
                                <p><strong>Costo Impresión:</strong> <span id="costoImpresionTotal_brazaletes"
                                        class="fw-bold">$0.00</span></p>
                                <hr>
                                <p><strong>Costo Total Producción:</strong> <strong
                                        id="costoProduccionTotal_brazaletes">$0.00</strong></p>
                                <p class="mt-2"><strong>Utilidad Bruta (Brazaletes):</strong> <strong
                                        id="utilidadBruta_brazaletes" class="text-success">$0.00</strong></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="d-grid gap-2 mt-4"><button id="limpiar_brazaletes" class="btn btn-danger"><i
                            class="fas fa-trash-alt"></i> Limpiar Campos de Brazaletes</button></div>
            </div>
        </div>

        <div class="card summary-card">
            <div class="card-header"><i class="fas fa-clipboard"></i> Resumen Simplificado (Brazaletes)</div>
            <div class="card-body p-4">
                <textarea id="resumenCliente_brazaletes" class="form-control" rows="4" readonly></textarea>
                <div class="d-grid gap-2 mt-3"><button id="copiar_brazaletes" class="btn btn-primary"><i
                            class="fas fa-copy"></i> Copiar Resumen de Brazaletes</button></div>
            </div>
        </div>

    </div>

    <script>
        // --- UTILIDADES GENERALES ---
        function formatoMoneda(numero) {
            return new Intl.NumberFormat('es-MX', { style: 'currency', currency: 'MXN' }).format(numero);
        }

        // ====================================================================
        // =========== LÓGICA DEL COTIZADOR DE BOTONES ========================
        // ====================================================================
        {
            const cantidadInput = document.getElementById('cantidad_botones');
            const opcionesDisenoEl = document.getElementById('opcionesDiseno_botones');
            const precioUnitarioVentaEl = document.getElementById('precioUnitarioVenta_botones');
            const subtotalEl = document.getElementById('subtotal_botones');
            const costoDisenoTotalEl = document.getElementById('costoDisenoTotal_botones');
            const ivaEl = document.getElementById('iva_botones');
            const totalEl = document.getElementById('total_botones');
            const costoUnitarioNetoEl = document.getElementById('costoUnitarioNeto_botones');
            const costoUnitarioSinIvaEl = document.getElementById('costoUnitarioSinIva_botones');
            const cantidadHojasEl = document.getElementById('cantidadHojas_botones');
            const utilidadAplicadaEl = document.getElementById('utilidadAplicada_botones');
            const costoBaseTotalEl = document.getElementById('costoBaseTotal_botones');
            const costoImpresionTotalEl = document.getElementById('costoImpresionTotal_botones');
            const costoCorteTotalEl = document.getElementById('costoCorteTotal_botones');
            const costoProduccionTotalEl = document.getElementById('costoProduccionTotal_botones');
            const utilidadBrutaEl = document.getElementById('utilidadBruta_botones');
            const detalleCostoBaseEl = document.getElementById('detalleCostoBase_botones');
            const detalleCostoImpresionEl = document.getElementById('detalleCostoImpresion_botones');
            const detalleCostoCorteEl = document.getElementById('detalleCostoCorte_botones');
            const resumenClienteEl = document.getElementById('resumenCliente_botones');
            const limpiarBtn = document.getElementById('limpiar_botones');
            const copiarBtn = document.getElementById('copiar_botones');

            const COSTO_BASE_BOTON = 3.63;
            const COSTO_HOJA_IMPRESION = 7.50;
            const COSTO_HOJA_CORTE = 18.00;
            const BOTONES_POR_HOJA = 8;
            const IVA_PERCENT = 0.16;

            function getPrecioVentaUnitario(cantidad) {
                if (cantidad >= 1 && cantidad <= 10) return 18.15;
                if (cantidad >= 11 && cantidad <= 20) return 16.335;
                if (cantidad >= 21 && cantidad <= 50) return 14.52;
                if (cantidad >= 51 && cantidad <= 100) return 12.705;
                if (cantidad >= 101 && cantidad <= 200) return 10.89;
                if (cantidad >= 201) return 9.075;
                return 0;
            }

            function getUtilidadMultiplicador(cantidad) {
                if (cantidad >= 1 && cantidad <= 10) return "x5";
                if (cantidad >= 11 && cantidad <= 20) return "x4.5";
                if (cantidad >= 21 && cantidad <= 50) return "x4";
                if (cantidad >= 51 && cantidad <= 100) return "x3.5";
                if (cantidad >= 101 && cantidad <= 200) return "x3";
                if (cantidad >= 201) return "x2.5";
                return "N/A";
            }

            function cotizar() {
                const cantidad = parseInt(cantidadInput.value, 10) || 0;
                const opcionDisenoSeleccionada = document.querySelector('input[name="costoDiseno_botones"]:checked');
                const costoDiseno = opcionDisenoSeleccionada ? parseFloat(opcionDisenoSeleccionada.value) : 0;
                const etiquetaDiseno = opcionDisenoSeleccionada ? opcionDisenoSeleccionada.dataset.label : "";

                if (cantidad <= 0) {
                    limpiarCampos();
                    return;
                }

                const precioVentaUnitario = getPrecioVentaUnitario(cantidad);
                const subtotalBotones = cantidad * precioVentaUnitario;
                const subtotalGeneral = subtotalBotones + costoDiseno;
                const iva = subtotalGeneral * IVA_PERCENT;
                const total = subtotalGeneral + iva;
                const costoUnitarioNeto = total / cantidad;

                const hojasNecesarias = Math.ceil(cantidad / BOTONES_POR_HOJA);
                const costoBaseTotal = cantidad * COSTO_BASE_BOTON;
                const costoImpresionTotal = hojasNecesarias * COSTO_HOJA_IMPRESION;
                const costoCorteTotal = hojasNecesarias * COSTO_HOJA_CORTE;
                const costoProduccionTotal = costoBaseTotal + costoImpresionTotal + costoCorteTotal;
                const multiplicador = getUtilidadMultiplicador(cantidad);
                const utilidadBruta = subtotalBotones - costoProduccionTotal;

                precioUnitarioVentaEl.textContent = formatoMoneda(precioVentaUnitario);
                subtotalEl.textContent = formatoMoneda(subtotalBotones);
                costoDisenoTotalEl.textContent = formatoMoneda(costoDiseno);
                ivaEl.textContent = formatoMoneda(iva);
                totalEl.textContent = formatoMoneda(total);
                costoUnitarioNetoEl.textContent = formatoMoneda(costoUnitarioNeto);
                costoUnitarioSinIvaEl.textContent = formatoMoneda(precioVentaUnitario);

                cantidadHojasEl.textContent = hojasNecesarias;
                utilidadAplicadaEl.textContent = multiplicador;
                detalleCostoBaseEl.textContent = `(${cantidad} pz x ${formatoMoneda(COSTO_BASE_BOTON)}) = `;
                costoBaseTotalEl.textContent = formatoMoneda(costoBaseTotal);
                detalleCostoImpresionEl.textContent = `(${hojasNecesarias} hojas x ${formatoMoneda(COSTO_HOJA_IMPRESION)}) = `;
                costoImpresionTotalEl.textContent = formatoMoneda(costoImpresionTotal);
                detalleCostoCorteEl.textContent = `(${hojasNecesarias} cortes x ${formatoMoneda(COSTO_HOJA_CORTE)}) = `;
                costoCorteTotalEl.textContent = formatoMoneda(costoCorteTotal);
                costoProduccionTotalEl.textContent = formatoMoneda(costoProduccionTotal);
                utilidadBrutaEl.textContent = formatoMoneda(utilidadBruta);

                generarResumenCliente(cantidad, costoUnitarioNeto, total, costoDiseno, etiquetaDiseno);
            }

            function generarResumenCliente(cantidad, costoUnitarioFinal, total, costoDiseno, etiquetaDiseno) {
                const nombreProducto = "Boton impresos a color tipo pin medida 5.5 cm diametro";
                let resumen = `Hola, te comparto la cotización: ${cantidad} pz de ${nombreProducto}, precio unitario: ${formatoMoneda(costoUnitarioFinal)}, total a pagar: ${formatoMoneda(total)} (IVA incluido).`;
                if (costoDiseno > 0) {
                    resumen += ` ${etiquetaDiseno}.`;
                }
                resumenClienteEl.value = resumen;
            }

            function limpiarCampos() {
                cantidadInput.value = '';
                const opcionDisenoSeleccionada = document.querySelector('input[name="costoDiseno_botones"]:checked');
                if (opcionDisenoSeleccionada) opcionDisenoSeleccionada.checked = false;

                precioUnitarioVentaEl.textContent = formatoMoneda(0);
                subtotalEl.textContent = formatoMoneda(0);
                costoDisenoTotalEl.textContent = formatoMoneda(0);
                ivaEl.textContent = formatoMoneda(0);
                totalEl.textContent = formatoMoneda(0);
                costoUnitarioNetoEl.textContent = formatoMoneda(0);
                costoUnitarioSinIvaEl.textContent = formatoMoneda(0);
                cantidadHojasEl.textContent = '0';
                utilidadAplicadaEl.textContent = 'N/A';
                detalleCostoBaseEl.textContent = '';
                costoBaseTotalEl.textContent = formatoMoneda(0);
                detalleCostoImpresionEl.textContent = '';
                costoImpresionTotalEl.textContent = formatoMoneda(0);
                detalleCostoCorteEl.textContent = '';
                costoCorteTotalEl.textContent = formatoMoneda(0);
                costoProduccionTotalEl.textContent = formatoMoneda(0);
                utilidadBrutaEl.textContent = formatoMoneda(0);
                resumenClienteEl.value = '';
            }

            function copiarResumen() {
                if (!resumenClienteEl.value) return;
                navigator.clipboard.writeText(resumenClienteEl.value).then(() => {
                    const originalText = copiarBtn.innerHTML;
                    copiarBtn.innerHTML = '¡Copiado!';
                    copiarBtn.classList.add('btn-success');
                    setTimeout(() => {
                        copiarBtn.innerHTML = originalText;
                        copiarBtn.classList.remove('btn-success');
                    }, 2000);
                }).catch(err => console.error('Error al copiar: ', err));
            }

            cantidadInput.addEventListener('input', cotizar);
            opcionesDisenoEl.addEventListener('change', cotizar);
            limpiarBtn.addEventListener('click', limpiarCampos);
            copiarBtn.addEventListener('click', copiarResumen);
        }

        // ====================================================================
        // =========== LÓGICA DEL COTIZADOR DE BRAZALETES =====================
        // ====================================================================
        {
            const cantidadInput = document.getElementById('cantidad_brazaletes');
            const tipoBrazaleteEl = document.getElementById('tipo_brazalete');
            const opcionesDisenoEl = document.getElementById('opcionesDiseno_brazaletes');
            const stockBrazaleteEl = document.getElementById('stock_brazalete');
            const subtotalEl = document.getElementById('subtotal_brazaletes');
            const costoDisenoTotalEl = document.getElementById('costoDisenoTotal_brazaletes');
            const costoPaqueteriaEl = document.getElementById('costoPaqueteria_brazaletes');
            const ivaEl = document.getElementById('iva_brazaletes');
            const totalEl = document.getElementById('total_brazaletes');
            const costoUnitarioSinIvaEl = document.getElementById('costoUnitarioSinIva_brazaletes');
            const costoUnitarioNetoEl = document.getElementById('costoUnitarioNeto_brazaletes');
            const utilidadAplicadaEl = document.getElementById('utilidadAplicada_brazaletes');
            const costoBaseTotalEl = document.getElementById('costoBaseTotal_brazaletes');
            const detalleCostoBaseEl = document.getElementById('detalleCostoBase_brazaletes');
            const costoMarcoEl = document.getElementById('costoMarco_brazaletes');
            const costoImpresionTotalEl = document.getElementById('costoImpresionTotal_brazaletes');
            const costoProduccionTotalEl = document.getElementById('costoProduccionTotal_brazaletes');
            const utilidadBrutaEl = document.getElementById('utilidadBruta_brazaletes');
            const resumenClienteEl = document.getElementById('resumenCliente_brazaletes');
            const limpiarBtn = document.getElementById('limpiar_brazaletes');
            const copiarBtn = document.getElementById('copiar_brazaletes');

            const IVA_PERCENT = 0.16;
            const COSTO_MARCO = 130;
            const COSTO_PAQUETERIA = 300;

            const costosBase = { papel: 1.4, plastico: 3.5 };
            const preciosVenta = {
                papel: [
                    { min: 1, max: 100, precio: 9.8, utilidad: 'x7' },
                    { min: 101, max: 200, precio: 8.4, utilidad: 'x6' },
                    { min: 201, max: 300, precio: 7, utilidad: 'x5' },
                    { min: 301, max: 500, precio: 5.6, utilidad: 'x4' },
                    { min: 501, max: Infinity, precio: 4.9, utilidad: 'x3.5' },
                ],
                plastico: [
                    { min: 1, max: 100, precio: 21, utilidad: 'x5' },
                    { min: 101, max: 200, precio: 14, utilidad: 'x4' },
                    { min: 201, max: 300, precio: 12.25, utilidad: 'x3.5' },
                    { min: 301, max: 500, precio: 10.5, utilidad: 'x3' },
                    { min: 501, max: Infinity, precio: 8.75, utilidad: 'x2.5' },
                ]
            };

            function getPrecioVenta(cantidad, tipo) {
                const tabla = preciosVenta[tipo];
                const tier = tabla.find(t => cantidad >= t.min && cantidad <= t.max);
                return tier || { precio: 0, utilidad: 'N/A' };
            }

            function cotizar() {
                const cantidad = parseInt(cantidadInput.value, 10) || 0;
                const tipo = document.querySelector('input[name="tipoBrazalete"]:checked').value;
                const opcionDiseno = document.querySelector('input[name="costoDiseno_brazaletes"]:checked');
                const enStock = document.querySelector('input[name="stockBrazalete"]:checked').value === 'si';

                if (cantidad <= 0) {
                    limpiarCampos();
                    return;
                }

                const costoDiseno = opcionDiseno ? parseFloat(opcionDiseno.value) : 0;
                const etiquetaDiseno = opcionDiseno ? opcionDiseno.dataset.label : "";
                const costoPaqueteria = enStock ? 0 : COSTO_PAQUETERIA;

                const { precio: precioVentaUnitario, utilidad } = getPrecioVenta(cantidad, tipo);
                const subtotalBrazaletes = cantidad * precioVentaUnitario;
                const subtotalGeneral = subtotalBrazaletes + costoDiseno + costoPaqueteria;
                const iva = subtotalGeneral * IVA_PERCENT;
                const total = subtotalGeneral + iva;
                const costoUnitarioNeto = total / cantidad;

                const costoBaseUnitario = costosBase[tipo];
                const costoBaseTotal = (cantidad + 10) * costoBaseUnitario; // +10 de sobrante
                const costoImpresion = Math.max(280, Math.ceil(cantidad / 10) * 20);
                const costoProduccionTotal = costoBaseTotal + COSTO_MARCO + costoImpresion;
                const utilidadBruta = subtotalBrazaletes - costoProduccionTotal;

                subtotalEl.textContent = formatoMoneda(subtotalBrazaletes);
                costoDisenoTotalEl.textContent = formatoMoneda(costoDiseno);
                costoPaqueteriaEl.textContent = formatoMoneda(costoPaqueteria);
                ivaEl.textContent = formatoMoneda(iva);
                totalEl.textContent = formatoMoneda(total);
                costoUnitarioSinIvaEl.textContent = formatoMoneda(precioVentaUnitario);
                costoUnitarioNetoEl.textContent = formatoMoneda(costoUnitarioNeto);

                utilidadAplicadaEl.textContent = utilidad;
                detalleCostoBaseEl.textContent = `(${cantidad} + 10 pz) x ${formatoMoneda(costoBaseUnitario)} = `;
                costoBaseTotalEl.textContent = formatoMoneda(costoBaseTotal);
                costoMarcoEl.textContent = formatoMoneda(COSTO_MARCO);
                costoImpresionTotalEl.textContent = formatoMoneda(costoImpresion);
                costoProduccionTotalEl.textContent = formatoMoneda(costoProduccionTotal);
                utilidadBrutaEl.textContent = formatoMoneda(utilidadBruta);

                generarResumenCliente(cantidad, tipo, costoUnitarioNeto, total, costoDiseno, etiquetaDiseno, costoPaqueteria);
            }

            function generarResumenCliente(cantidad, tipo, costoUnitarioFinal, total, costoDiseno, etiquetaDiseno, costoPaqueteria) {
                const nombreProducto = `Brazalete de ${tipo} impreso a 1 tinta en serigrafía`;
                let resumen = `Hola, te comparto la cotización: ${cantidad} pz de ${nombreProducto}, precio unitario: ${formatoMoneda(costoUnitarioFinal)}, total a pagar: ${formatoMoneda(total)} (IVA incluido).`;
                if (costoDiseno > 0) {
                    resumen += ` ${etiquetaDiseno}.`;
                }
                if (costoPaqueteria > 0) {
                    resumen += ` Incluye costo de paquetería.`;
                }
                resumenClienteEl.value = resumen;
            }

            function limpiarCampos() {
                cantidadInput.value = '';
                document.querySelector('input[name="costoDiseno_brazaletes"]:checked')?.removeAttribute('checked');

                const radiosDiseno = document.getElementsByName('costoDiseno_brazaletes');
                for (const radio of radiosDiseno) radio.checked = false;

                subtotalEl.textContent = formatoMoneda(0);
                costoDisenoTotalEl.textContent = formatoMoneda(0);
                costoPaqueteriaEl.textContent = formatoMoneda(0);
                ivaEl.textContent = formatoMoneda(0);
                totalEl.textContent = formatoMoneda(0);
                costoUnitarioSinIvaEl.textContent = formatoMoneda(0);
                costoUnitarioNetoEl.textContent = formatoMoneda(0);
                utilidadAplicadaEl.textContent = 'N/A';
                detalleCostoBaseEl.textContent = '';
                costoBaseTotalEl.textContent = formatoMoneda(0);
                costoMarcoEl.textContent = formatoMoneda(0);
                costoImpresionTotalEl.textContent = formatoMoneda(0);
                costoProduccionTotalEl.textContent = formatoMoneda(0);
                utilidadBrutaEl.textContent = formatoMoneda(0);
                resumenClienteEl.value = '';
            }

            function copiarResumen() {
                if (!resumenClienteEl.value) return;
                navigator.clipboard.writeText(resumenClienteEl.value).then(() => {
                    const originalText = copiarBtn.innerHTML;
                    copiarBtn.innerHTML = '¡Copiado!';
                    copiarBtn.classList.add('btn-success');
                    setTimeout(() => {
                        copiarBtn.innerHTML = originalText;
                        copiarBtn.classList.remove('btn-success');
                    }, 2000);
                }).catch(err => console.error('Error al copiar: ', err));
            }

            cantidadInput.addEventListener('input', cotizar);
            tipoBrazaleteEl.addEventListener('change', cotizar);
            opcionesDisenoEl.addEventListener('change', cotizar);
            stockBrazaleteEl.addEventListener('change', cotizar);
            limpiarBtn.addEventListener('click', limpiarCampos);
            copiarBtn.addEventListener('click', copiarResumen);
        }

    </script>

    <!-- Botón Flotante de Regreso al Menú -->
    <a href="indexcotizadorcompleto.html" class="btn-home-flotante" title="Volver al Menú Principal">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span>Volver al Menú</span>
    </a>

    <style>
        .btn-home-flotante {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
            font-weight: 600;
            font-size: 0.95rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 9999;
            font-family: 'Poppins', 'Inter', sans-serif;
        }

        .btn-home-flotante:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.5);
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        .btn-home-flotante:active {
            transform: translateY(-1px) scale(1.02);
        }

        .btn-home-flotante svg {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .btn-home-flotante span {
            white-space: nowrap;
        }

        /* Responsive: en móviles solo mostrar el icono */
        @media (max-width: 768px) {
            .btn-home-flotante {
                padding: 15px;
                border-radius: 50%;
                bottom: 20px;
                right: 20px;
            }

            .btn-home-flotante span {
                display: none;
            }

            .btn-home-flotante svg {
                width: 24px;
                height: 24px;
            }
        }
    </style>
</body>

</html>